CREATE TABLE IF NOT EXISTS public.roles
(
    id bigserial NOT NULL,
    name character varying(255) NOT NULL,
    CONSTRAINT roles_pkey PRIMARY KEY (id)
)
CREATE TABLE IF NOT EXISTS public.users (
    id bigserial
    email VARCHAR(255) NOT NULL, 
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    patronymic VARCHAR(255),
    phone VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    type VARCHAR(255),
    role_id integer NOT NULL,
	CONSTRAINT email_uk UNIQUE (email),
	CONSTRAINT pk_users PRIMARY KEY (id),
        CONSTRAINT fk_role FOREIGN KEY (role_id) REFERENCES roles(id)
);

CREATE TABLE appointments (
    id bigserial
    date_and_time TIMESTAMP NOT NULL, 
    message VARCHAR(255),
    patient_id integer NOT NULL,
    doctor_id integer NOT NULL,
	CONSTRAINT pk_appointments PRIMARY KEY (id),
    	CONSTRAINT fk_patient FOREIGN KEY (patient_id) REFERENCES users(id),
	CONSTRAINT fk_doctor FOREIGN KEY (doctor_id) REFERENCES users(id)
);